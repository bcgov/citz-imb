name: CI Pipeline
on:
  push:
    branches: [mainx]

jobs:
  build-slam-backend:
    name: SLAM-API
    uses: bcgov/citz-imb/.github/workflows/Build.yml@f64af25a5087af0652810c58bb35b8422b8d0d1a
    with:
      APP_NAME: slam-api
      APP_PATH: ./apps/slam/api
      PORT: 3333

  test-output:
    name: test
    runs-on: ubuntu-latest
    environment: tools

    steps:
      - runs: |
        echo '${{ needs.build-slam-backend.outputs.registry-path }}'

  # deploy-slam-backend-tools:
  #   needs: [build-slam-backend]
  #   name: SLAM-API
  #   uses: bcgov/citz-imb/.github/workflows/Deploy.yml@f64af25a5087af0652810c58bb35b8422b8d0d1a
  #   with:
  #     APP_NAME: slam-api
  #     PORT: 3333
  #     ENVIRONMENT: tools
  #     REGISTRY_PATH: ${{ needs.build-slam-backend.outputs.registry-path }}
  #   secrets:
  #     OPENSHIFT_SERVER: ${{ secrets.OPENSHIFT_SERVER }}
  #     OPENSHIFT_TOKEN: ${{ secrets.OPENSHIFT_TOKEN }}
  #     OPENSHIFT_NAMESPACE: ${{ secrets.OPENSHIFT_NAMESPACE }}
