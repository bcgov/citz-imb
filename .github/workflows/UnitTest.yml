# @format

name: Test

on:
  workflow_call:
    inputs:
      APPS:
        required: true
        type: string
      ENVIRONMENTS:
        required: true
        type: string
      OS:
        required: false
        type: string
        default: ubuntu-latest

jobs:
  Unit-Tests:
    name: ${{ matrix.APPS.name }}
    runs-on: ${{ inputs.OS }}
    strategy:
      matrix: ${{fromJSON('{"include":[{"apps":{"name":"slam-api","path":"./apps/slam/api"}},{"apps":{"name:":"slam-app","path":"./apps/slam/app"}},{"ENVIRONMENTS":"dev"},{"ENVIRONMENTS":"test"},{"ENVIRONMENTS":"prod"}]}')}}
    steps:
      - name: echo params
        run: echo "${{ matrix.APPS }} ${{ matrix.ENVIRONMENTS }}"

      - name: echo inputs
        run: echo "${{ toJSON(inputs)}}"
